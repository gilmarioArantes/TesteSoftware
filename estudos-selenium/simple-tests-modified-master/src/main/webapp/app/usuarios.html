<!DOCTYPE html>
<html ng-app="simpleTests">
<head>
<meta charset="UTF-8">
<title>Simple Tests - Gerência de Usuários</title>

<link rel="stylesheet" href="../resources/css/bootstrap.css">
<link rel="stylesheet" href="../resources/css/bootstrap-theme.css">

<script src="../resources/js/jquery-2.1.4.js"></script>
<script src="../resources/js/bootstrap.js"></script>
<script src="../resources/js/angular.js"></script>
<script src="../resources/js/angular-messages.js"></script>

<script src="app.js"></script>
<script src="controllers/UsuariosController.js"></script>
<script src="services/UsuariosService.js"></script>


</head>
<body ng-controller="UsuariosController">

<div ng-include="'menu.html'"></div>

<div class="container">

	<h2>Usuários <small>Gerenciando os usuários existentes</small> </h2> 
	
	<div class="alert alert-success alert-dismissible" role="alert" ng-if="mensagemSucesso">
	  <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
	  <strong>Mensagem</strong> {{mensagemSucesso}}
	</div>
	
	<div class="alert alert-warning alert-dismissible" role="alert" ng-if="mensagemAviso">
	  <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
	  <strong>Atenção</strong> {{mensagemAviso}}
	</div>
	
	<div class="alert alert-danger alert-dismissible" role="alert" ng-if="mensagemErro">
	  <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
	  <strong>Erro</strong> {{mensagemErro}}
	</div>
	
	<div class="panel panel-primary">
		<div class="panel-heading">Usuários existentes</div>
		<div class="panel-body">
			<table class="table table-hover table-striped">
				<tr>
					<th>#</th>
					<th>Nome</th>
					<th>E-mail</th>
					<th></th>
				</tr>
				<tr ng-repeat="usuario in usuarios">
					<td>{{$index + 1}}</td>
					<td>{{usuario.nome}}</td>
					<td>{{usuario.email}}</td>
					<td>
						<button class="btn btn-default btn-mini" title="Alterar o usuário" ng-click="exibirFormulario(usuario)">
							<span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
						</button>
						<button class="btn btn-danger btn-mini" title="Excluir o usuário" ng-click="excluirUsuario(usuario)">
							<span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
						</button>
					</td>
				</tr>
			</table>
		</div>
	</div>
	
	<button class="btn btn-primary" ng-click="exibirFormulario()">Novo Usuário</button>
	
	<hr/>
	
	<form class="form-horizontal" ng-if="exibeFormulario">
		<div class="form-group">
			<label for="nome" class="col-sm-2 control-label">Nome</label>
			<div class="col-sm-10">
				<input autocomplete="off" type="text" class="form-control" id="nome" ng-model="usuario.nome" />
			</div>
		</div>
		<div class="form-group">
			<label for="email" class="col-sm-2 control-label">E-mail</label>
			<div class="col-sm-10">
				<input autocomplete="off" type="text" class="form-control" id="email" ng-model="usuario.email" />
			</div>
		</div>
		<div class="form-group" ng-if="!usuario.id">
			<label for="senha" class="col-sm-2 control-label">Senha</label>
			<div class="col-sm-10">
				<input autocomplete="off" type="password" class="form-control" id="senha" ng-model="usuario.senha" />
			</div>
		</div>
		<div class="form-group">
			<div class="col-sm-offset-2 ">
				<button type="button" class="btn btn-primary" ng-click="salvarUsuario(usuario)">Salvar</button>
				<button type="button" class="btn btn-default" ng-click="escondeFormulario()">Cancelar</button>
			</div>
		</div>
	</form>


	</div>

</body>
</html>