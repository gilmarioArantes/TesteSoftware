<!DOCTYPE html>
<html ng-app="simpleTests">
<head>
<meta charset="UTF-8">
<title>Simple Tests - Casos de Testes</title>

<link rel="stylesheet" href="../resources/css/bootstrap.css">
<link rel="stylesheet" href="../resources/css/bootstrap-theme.css">

<script src="../resources/js/jquery-2.1.4.js"></script>
<script src="../resources/js/bootstrap.js"></script>
<script src="../resources/js/angular.js"></script>
<script src="../resources/js/angular-messages.js"></script>

<script src="app.js"></script>
<script src="services/SimpleTestConstants.js"></script>
<script src="controllers/CasosDeTesteController.js"></script>
<script src="services/CasosDeTesteService.js"></script>
<script src="services/ProjetosService.js"></script>

</head>
<body ng-controller="CasosDeTesteController">

<div ng-include="'menu.html'"></div>

<div class="container">

	<h2>Casos de Testes <small>Gerenciando os casos existentes</small> </h2> 
	
	<div class="alert alert-success alert-dismissible" role="alert" ng-if="mensagemSucesso">
	  <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
	  <strong>Mensagem</strong> {{mensagemSucesso}}
	</div>
	
	<div class="alert alert-warning alert-dismissible" role="alert" ng-if="mensagemAviso">
	  <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
	  <strong>Atenção</strong> {{mensagemAviso}}
	</div>
	
	<div class="alert alert-danger alert-dismissible" role="alert" ng-if="mensagemErro">
	  <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
	  <strong>Erro</strong> {{mensagemErro}}
	</div>
	
	<form name="casoForm" class="form-horizontal">
		<div class="form-group">
			<label for="nome" class="col-sm-2 control-label">Nome</label>
			<div class="col-sm-10">
				<input autocomplete="off" type="text" class="form-control" name="nome" ng-model="casoDeTeste.nome" ng-required="true" ng-minlength="10" />
			</div>
		</div>
		<div class="form-group">
			<label for="descricao" class="col-sm-2 control-label">Descrição</label>
			<div class="col-sm-10">
				<textarea type="text" class="form-control" name="descricao" ng-model="casoDeTeste.descricao">
				</textarea>
			</div>
		</div>
		
		<div class="form-group">
			<label class="col-sm-2 control-label">Tipo de Teste</label>
			<div class="col-sm-5">
				<select class="form-control" ng-model="casoDeTeste.tipo" ng-options="tipo for tipo in tiposDeTeste" ng-required="true">
				  <option value="">Escolha um Tipo de Teste ...</option>
				</select>
			</div>
		</div>
		
		<div class="form-group">
			<label class="col-sm-2 control-label">Projeto</label>
			<div class="col-sm-7">
				<select class="form-control" ng-model="casoDeTeste.projeto" ng-options="projeto.nome for projeto in projetos" ng-required="true">
				  <option value="">Escolha um projeto ...</option>
				</select>
			</div>
		</div>
		
		<div class="form-group">
			<label for="preCondicoes" class="col-sm-2 control-label">Pré-Condições</label>
			<div class="col-sm-10">
				<textarea type="text" class="form-control" name="preCondicoes" ng-model="casoDeTeste.preCondicoes" ng-required="true">
				</textarea>
			</div>
		</div>
		<div class="form-group">
			<label class="col-sm-2 control-label">Passos</label>
			<div class="col-sm-10">
				<textarea type="text" class="form-control" name="passos" ng-model="casoDeTeste.passos" ng-required="true">
				</textarea>
			</div>
		</div>
		<div class="form-group">
			<label class="col-sm-2 control-label">Resultados Esperados</label>
			<div class="col-sm-10">
				<textarea type="text" class="form-control" name="resultadoEsperado" ng-model="casoDeTeste.resultadoEsperado" ng-required="true">
				</textarea>
			</div>
		</div>
		<div class="form-group">
		  <div class="col-sm-offset-2 col-sm-10">
		  	
		    <button type="button" class="btn btn-primary" ng-click="salvarCasoDeTeste(casoDeTeste)" ng-disabled="casoForm.$invalid">Salvar</button>
		  </div>
		</div>
	</form>
	

	<div class="panel panel-primary">
		<div class="panel-heading">Casos de Testes existentes</div>
		<div class="panel-body">
			<table class="table table-hover">
				<tr>
					<th>#</th>
					<th>Nome</th>
					<th>Descrição</th>
					<th>Tipo</th>
					<th>Projeto</th>
					<th></th>
				</tr>
				<tr ng-repeat="caso in casos">
					<td>{{$index + 1}}</td>
					<td>{{caso.nome}}</a></td>
					<td>{{caso.descricao}}</td>
					<td>{{caso.tipo}}</td>
					<td>{{caso.projeto.descricao}}</td>
					<td>
						<button class="btn btn-danger btn-mini" title="Excluir o Caso de Teste" ng-click="excluirCasoDeTeste(caso)">
							<span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
						</button>
					</td>
				</tr>
			</table>
		</div>
	</div>


</div>

</body>
</html>